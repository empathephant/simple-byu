<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">

<dom-module id="simple-byu-app">
  <template>
    <style>

      :host {
        display: block;
      }

			* {
				font-family: Roboto, sans-serif;
			}

			#container {
				max-width: 800px;
				margin: auto;
				padding: .5em;
			}

			footer {
				text-align: center;
				color: #898989;
				padding: 1em;
			}

    </style>

		<div id="container">
			<header>
				<h1>Simple BYU</h1>
				<p>This page includes links to everything that you wish was on the BYU homepage.  Contact Brandon Blätter on Slack, <a href="https://www.messenger.com/t/intcreator" target="_blank">Facebook</a>, or <a href="https://twitter.com/messages/compose?recipient_id=169717937" target="_blank">Twitter</a> (@intcreator) to suggest more links and features.</p>
			</header>

			<!-- TODO: ADD FILTER TEXTBOX -->

			<h2>Links</h2>
			<template is="dom-repeat" items="[[flattenedLinks]]" as="link">
				<h3><a href="[[link.url]]">[[link.title]]</a></h3>
				<p>[[link.description]]</p>
			</template>

			<footer>
				<p>Simple BYU created and maintained by <a href="https://intcreator.com/" target="_blank">Brandon Blätter</a>.</p>
			</footer>
		</div>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class SimpleByuApp extends Polymer.Element {

      static get is() { return 'simple-byu-app'; }

      static get properties() {
        return {
					links: {
						type: Object,
						value: {
							account: [
								{
									title: 'Personal Information',
									url: 'https://gamma.byu.edu/ry/ae/prod/person/cgi/personSummary.cgi',
									description: 'Update personal information such as name, phone, address, and marital status'
								}
							],
							calendar: [
								{
									title: 'Academic Calendar',
									url: 'https://registrar.byu.edu/academic-calendar',
									description: 'A high level view of the school year (add/drop deadline, finals schedule, etc.)'
								}
							],
							communication: [
								{
									title: 'Y Message',
									url: 'https://saasta.byu.edu/auth/ymessage/student/',
									description: 'For sending and receiving sensitive school related messages.'
								}
							],
							dining: [
								{
									title: 'My Dining Account',
									url: 'https://sasapps.byu.edu/services/dining/',
									description: 'Manage meal plans for the Cannon Center, Cougareat, and more'
								}
							],
							finance: [
								{
									title: 'Y Time',
									url: 'https://hrms.byu.edu/psp/ps/EMPLOYEE/HRMS/c/Y_EMPLOYEE_SELF_SERVICE.Y_TL_TIME_ENTRY.GBL',
									description: 'Clock in and out of your on-campus jobs'
								},
								{
									title: 'My Financial Center',
									url: 'https://sa.byu.edu/psp/ps/EMPLOYEE/HRMS/c/Y_MY_FINANCIAL_CENTER.Y_MFC_HOME',
									description: 'Make payments on tuition, on campus rent and utilities, and other fees'
								},
								{
									title: 'Cougar Cash',
									url: 'https://sa.byu.edu/psc/ps/EMPLOYEE/HRMS/c/Y_MY_FINANCIAL_CENTER.Y_SIG_HOME_FL.GBL?Page=Y_SIG_HOME_FL',
									description: 'Use your BYU ID card to pay for printing and other amenities on campus'
								}
							],
							housing: [
								{
									title: 'My Housing Account',
									url: 'https://sasapps.byu.edu/secure/services/main/default.aspx',
									description: 'Manage on campus housing (single, married, and family)'
								}
							],
							classes: [
								{
									title: 'Weekly Schedule', // TODO: Add a script to calculate the current semester as the query param for year_term (1: winter, 3: spring, 4: summer, 5: fall)
									url: 'https://y.byu.edu/ry/ae/prod/registration/cgi/regMain.cgi?c=regMain&e=@ShowSched&year_term=20175',
									description: 'Your weekly schedule for this semester'
								},
								{
									title: 'Class Registration',
									url: 'https://y.byu.edu/ry/ae/prod/mymap/cgi/register.cgi',
									description: 'Add, drop, and withdraw from classes using MyMAP'
								},
								{
									title: 'Grades',
									url: 'https://y.byu.edu/ry/ae/prod/records/cgi/stdCourseWork.cgi',
									description: 'See a summary of your grades'
								}
							],
							thirdParty: [
								{
									title: 'Piano Locator',
									url: 'http://pianolocator.info/',
									description: 'Locate Pianos on campus'
								}
							]
						}
					},
          flattenedLinks: {
            type: Array,
            computed: 'flattenLinks(links)'
          },
					stuff: {
						type: Array,
						value: [
							{
								title: 'slkdf'
							},
							{
								title: 'wles'
							}
						]
					}
        };
      }

			// take the categories, flatten and sort them for alphabetic view
			flattenLinks(links) {
				return Object.values(links)
					.reduce((acc, val) => acc.concat(val))
					.sort((a, b) => a.title.localeCompare(b.title));
			}

    }

    window.customElements.define(SimpleByuApp.is, SimpleByuApp);
  </script>
</dom-module>
